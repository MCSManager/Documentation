# 使用 Linux 进行基岩版开服

本文来自贡献者：[DuckXiu](https://github.com/DuckXiu)

此教程使用 Ubuntu18.04 LTS，基岩版官方服务端(Bedrock Dedicated Server)1.17.32版本 进行描述

先决条件：Ubuntu版本大于18.04、非精简版系统，MCSManager 已安装

<br />

## 获取服务端

最新的官方基岩版服务端可在[我的世界基岩版官网](https://www.minecraft.net/zh-hans/download/server/bedrock)获取。

若想要获取较老版本的服务端，请到第三方论坛—[MineBBS](https://www.minebbs.com/bds/history)寻找对应版本的服务端(不保证可用性)。

**注意**：不管您选择哪种方法，获取的时候一定要选择Ubuntu版本！

<br />

## 面板中创建实例

进入面板，依次进入**基础功能**-**应用实例**-**新建实例**。

![1](image/1-1042753.png)



选择**基岩版 Minecraft 服务端**，上传服务端压缩包。

![2](image/2-1042768.png)

![3](image/3-1042796.png)

**实例名称**请自行填写。

**启动命令** 建议使用**`./bedrock_server`**，此命令在**bedrock_server**文件**未进行重命名**的情况下使用，如果您对该文件进行了重命名，请自行更改为**新文件名**。

**服务器文件目录** 无特殊要求建议不填，让系统自动生成，如需自定义请务必使用**绝对路径**。

**上传服务端压缩包** 请上传刚才下载的服务端zip文件包。

![4](image/4-1042808.png)

随后点击**前往编辑实例具体参数**。

![5](image/5-1042817.png)


<br />

## 实例详细信息设置

**Docker**的实例创建方式**暂不提及**，本教程仅展示**默认类型**的创建方法。

![6](image/6-1042828.png)

若**无特殊要求**，此页面默认即可，请直接点击**保存配置**。



**到期时间** 适用于控制可用性，一般用于出售面板服等。

**关闭实例命令** 即输入此命令后，关闭这个实例。



保存配置后，请点击下方**控制台**。


<br />

## 启动配置

进入控制台，**请先不要着急启动**。

点击 **特定配置** 选项卡

![7](image/7-1042838.png)

找到 **server-port**(服务器端口)配置项 修改服务端端口为您可用的端口，建议使用五位数无序端口号，**请勿使用21、22、80、443、3306、8888**等常用端口，以及**23333与24444** MCSM服务所需端口。

修改完成后，点击上方**保存配置**，随后点击回到**配置文件列表，回到控制台**。

现在，即可点击**开启实例**，若一切正常，现在可以使用**同版本**的基岩版客户端连接。

![8](image/8-1042846.png)

上图为**正常启动**服务端的示例。


<br />

## 错误排除

#### 一：`[MCSMANAGER] [错误] 实例启动失败，请检查启动命令，主机环境和配置文件等`

​	出现这类问题的原因有很多种，目前已知**三种**情况：**启动命令错误，端文件没有运行权限，Ubuntu系统环境没有依赖。**请依次排查。

​	**第一种**错误解决方案：回过头去看教程～

​	**第二种**和**第三种**错误具体表现为：

```
[MCSMANAGER] [ERROR] 检测到实例进程/容器启动失败（PID 为空），其可能的原因是：
1. 实例启动命令编写错误，请前往实例设置界面检查启动命令与参数。
2. 系统主机环境不正确或缺少环境，如 Java 环境等。

原生启动命令：
./bedrock_server

启动命令解析体:
程序：./bedrock_server
参数：[]

请将此信息报告给管理员，技术人员或自行排查故障。


[MCSMANAGER] [错误] 实例启动失败，请检查启动命令，主机环境和配置文件等
```

​	

如果您是**面板服务器管理者**，请检查**bedrock_server**文件是否给予了755权限，如果给予了权限，启动还是报错，请参考以下的解决方案：

注：由于Linux类系统环境复杂，本文可能**无法提供**具体的解决方案，仅能提供有限的排查思路，请自行**百度**搜索。

​	1，使用ssh登录服务器，将服务端解压到根目录，运行。

​		如果提示`-bash: ./bedrock_server: 权限不够`或`Permission denied`

​		***那就是你你根本没给755***

​	2，同上步骤

​		提示依赖报错，如果您是使用腾讯云等厂商的服务器，请在服务商面板尝试重装Ubuntu系统。

​		重装后还是报同错误，请将错误输出复制到百度，自行搜索解决方案。

如果您是**面板服用户**，请联系您的服务商。



#### 二：我明明启动正常，但死活连不上。

​	这种情况多半是**安全组没放行**，请在**服务商安全组面板放行您的服务端端口**，并在**系统防火墙**一并放行。

​	如果还是无法连接，请联系您的服务商。



如果您使用本教程创建服务器时出现了问题，请加入**MCSM面板用户群**：[198646856](http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=NjZnbz2w1oEhjHbcL8nyxoxtrbtmFlp5&authKey=ktl9iperzg%2BdAjJeyZJ6hDSd1aZksO8uTpEbWeqY6XU1K6lg005nqPGlZ2SQp6Sx&noverify=0&group_code=198646856) 或者可以联系作者QQ：1400008010，本人会提供有限的技术支持。

